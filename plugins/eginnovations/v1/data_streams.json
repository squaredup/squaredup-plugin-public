{
    "rowTypes": [
        {
            "name": "stuff",
            "metadata": [
                {
                    "name": "enum",
                    "displayName": "Enum",
                    "shape": "string",
                    "role": "label"
                },
                {
                    "name": "start",
                    "displayName": "Start",
                    "shape": "date"
                },
                {
                    "name": "unixStart",
                    "displayName": "Unix Start",
                    "shape": [
                        "number",
                        {
                            "decimalPlaces": 0
                        }
                    ]
                },
                {
                    "name": "end",
                    "displayName": "End",
                    "shape": "date"
                },
                {
                    "name": "unixEnd",
                    "displayName": "Unix End",
                    "shape": [
                        "number",
                        {
                            "decimalPlaces": 0
                        }
                    ]
                },
                {
                    "name": "interval",
                    "displayName": "Interval",
                    "shape": "string"
                },
                {
                    "name": "top",
                    "displayName": "Top",
                    "shape": "string"
                }
            ]
        }
    ],
    "dataSources": [
        {
            "name": "dataSourceUnscoped",
            "displayName": "Stuff (no scope)",
            "description": "Return stuff",
            "supportedScope": "none"
        },
        {
            "name": "appScopedProperties",
            "displayName": "App-scoped Properties",
            "description": "Get selected properties for scoped apps",
            "supportedScope": "list",
            "targetNodesProperties": [
                "id",
                "name",
                "sourceId",
                "appType",
                "appStatus"
            ]
        },
        {
            "name": "getComponentsByState",
            "displayName": "Components By State",
            "description": "Reporting and Non-reporting Components",
            "supportedScope": "none"
        },
        {
            "name": "getAlarmCount",
            "displayName": "Alarm Count",
            "description": "Number of Alarms",
            "supportedScope": "none"
        },
        {
            "name": "getAlerts",
            "displayName": "Alerts",
            "description": "Alerts for components filter",
            "supportedScope": "list",
            "targetNodesProperties": [
                "componentType",
                "measure",
                "test",
                "service",
                "alarmID",
                "description",
                "startTime",
                "componentName",
                "priority",
                "layer"
            ]
        }
    ],
    "matches": {
        "__configId": {
            "type": "equals",
            "value": "{{configId}}"
        }
    },
    "dataStreams": [
        {
            "displayName": "Stuff",
            "description": "Returns Stuff",
            "dataSourceName": "dataSourceUnscoped",
            "definition": {
                "name": "stuffUnscoped",
                "dataSourceConfig": {},
                "rowPath": [],
                "matches": "none",
                "rowType": {
                    "name": "stuff"
                }
            },
            "template": [
                {
                    "name": "top",
                    "type": "text",
                    "label": "Optional, list top n",
                    "title": "Optional, list top n",
                    "help": "Pick how many rows of data to return",
                    "validation": {
                        "required": false
                    },
                    "placeholder": "10"
                }
            ]
        },
        {
            "displayName": "App Health",
            "description": "Returns Health for scoped Apps",
            "dataSourceName": "appScopedProperties",
            "provides": "health",
            "definition": {
                "name": "appHealth",
                "timeframes": false,
                "dataSourceConfig": {
                    "properties": [
                        "appStatus",
                        "appType"
                    ]
                },
                "rowPath": [],
                "matches": {
                    "sourceType": {
                        "type": "equals",
                        "value": "mySortOfApp"
                    }
                },
                "metadata": [
                    {
                        "name": "appStatus",
                        "displayName": "Status",
                        "shape": [
                            "state",
                            {
                                "map": {
                                    "success": [
                                        "OK"
                                    ],
                                    "warning": [
                                        "Degraded",
                                        "Installing"
                                    ],
                                    "error": [
                                        "Broken"
                                    ]
                                }
                            }
                        ]
                    },
                    {
                        "name": "name",
                        "displayName": "Name",
                        "shape": "string",
                        "role": "label"
                    },
                    {
                        "name": "id",
                        "visible": false,
                        "shape": "string",
                        "role": "id"
                    },
                    {
                        "name": "appType",
                        "displayName": "App Type",
                        "shape": "string"
                    }
                ]
            }
        },
        {
            "displayName": "Components By State",
            "description": "Reporting and Non-reporting Components",
            "dataSourceName": "getComponentsByState",
            "definition": {
                "name": "getComponentsByState",
                "dataSourceConfig": {},
                "rowPath": [],
                "matches": "none",
                "metadata": [
                    {
                        "name": "componentType",
                        "displayName": "Component Type",
                        "shape": "string",
                        "role": "label"
                       
                    },
                    {
                        "name": "componentName",
                        "displayName": "Component Name",
                        "shape": "string",
                        "role": "label"
                       
                    },
                    {
                        "name": "priority",
                        "displayName": "Priority",
                        "shape": "string",
                        "role": "label"
                       
                    }
                ]
               
            }
           
        },
        {
            "displayName": "Alarm Count",
            "description": "Numbers of Alarm",
            "dataSourceName": "getAlarmCount",
            "definition": {
                "name": "getAlarmCount",
                "dataSourceConfig": {},
                "rowPath": [],
                "matches": "none",
                "metadata": [
                    {
                        "name": "componentType",
                        "displayName": "Component Type",
                        "shape": "string",
                        "role": "label"
                       
                    },
                    {
                        "name": "total",
                        "displayName": "Total",
                        "shape": "string",
                        "role": "label"
                       
                    },
                    {
                        "name": "critical",
                        "displayName": "Critical",
                        "shape": "string",
                        "role": "label"
                       
                    },
                    {
                        "name": "major",
                        "displayName": "Major",
                        "shape": "string",
                        "role": "label"
                       
                    },
                    {
                        "name": "minor",
                        "displayName": "Minor",
                        "shape": "string",
                        "role": "label"
                       
                    }
                ]
               
            }
           
        },
        {
            "displayName": "Alerts",
            "description": "Returns Alerts for scoped components",
            "dataSourceName": "getAlerts",
            "provides": "componentType",
            "definition": {
                "name": "alerts",
                "timeframes": false,
                "dataSourceConfig": {
                    "properties": [
                        "componentType",
                        "componentName"
                       
                    ]
                },
                "rowPath": [],
                "matches": {
                    "sourceType": {
                        "type": "equals",
                        "value": "mySortOfApp"
                    }
                },
                "metadata": [
                    {
                        "name": "componentType",
                        "displayName": "Component Type",
                        "shape": "string",
                        "role": "label"
                       
                    },
                    {
                        "name": "measure",
                        "displayName": "Measure",
                        "shape": "string", 
                        "role": "label"
                    },
                    {
                        "name": "test",
                        "displayName": "Test",
                        "shape": "string",
                        "role": "label"
                    },
                    {
                        "name": "service",
                       "displayName": "Service",
                        "shape": "string",
                        "role": "label"
                    },
                    {
                        "name": "alarmID",
                        "displayName": "Alarm ID",
                        "shape": "string",
                        "role": "label"
                    },
                    {
                        "name": "description",
                        "displayName": "Description",
                        "shape": "string",
                        "role": "label"
                    },
                    {
                        "name": "startTime",
                        "displayName": "Start Time",
                        "shape": "string",
                        "role": "label"
                    },
                    {
                        "name": "componentName",
                        "displayName": "Component Name",
                        "shape": "string",
                        "role": "label"
                    },

                    {
                        "name": "priority",
                        "displayName": "Priority",
                        "shape": "string",
                        "role": "label"
                    },
                    {
                        "name": "layer",
                        "displayName": "Layer",
                        "shape": "string",
                        "role": "label"
                    }

                ]
            }
        }
    ]
}